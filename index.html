<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Consultant's AI Prompting Toolkit: A Dynamic Guide V2</title>
    <style>
        /*
        * Embedded CSS Styling to Mimic a Clean Jekyll Theme (V2)
        */
        :root {
            --color-text: #151515;
            --color-background: #ffffff;
            --color-link: #2a7ae2; /* Primary Action/Link Blue */
            --color-primary: #0056b3; /* Professional Blue */
            --color-accent: #f6f6f6; /* Light gray for blocks */
            --color-success: #38a169; /* Green for success messages */
            --border-radius: 4px;
            --font-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
        }

        body {
            font-family: var(--font-stack);
            margin: 0;
            padding: 20px;
            background-color: #fcfcfc;
            color: var(--color-text);
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--color-background);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
        }

        h1 {
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 2px solid var(--color-accent);
            padding-bottom: 10px;
            font-weight: 600;
        }

        h2 {
            color: var(--color-primary);
            font-size: 1.5rem;
            margin-top: 20px;
            margin-bottom: 15px;
        }

        h3 {
            color: var(--color-text);
            font-size: 1.2rem;
            margin-top: 20px;
            border-left: 3px solid var(--color-link);
            padding-left: 10px;
            font-weight: 500;
        }

        .layout-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 40px;
            margin-top: 20px;
        }
        
        /* Form Grouping and Inputs */
        .form-group {
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: var(--border-radius);
        }
        
        .form-group fieldset {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: var(--border-radius);
        }

        .form-group legend {
            font-weight: bold;
            color: var(--color-primary);
            padding: 0 10px;
        }
        
        .generator-section label {
            display: block;
            margin-bottom: 8px;
            cursor: pointer;
            padding: 8px;
            border: 1px solid #e0e0e0;
            border-radius: var(--border-radius);
            transition: background-color 0.2s;
        }

        .generator-section label:hover {
            background-color: var(--color-accent);
        }

        .generator-section input[type="radio"]:checked + span,
        .generator-section input[type="checkbox"]:checked + span {
            font-weight: bold;
            color: var(--color-primary);
        }

        select, input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #c0c0c0;
            border-radius: var(--border-radius);
            box-sizing: border-box;
            font-size: 1rem;
            font-family: inherit;
        }
        
        textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        /* Output Area and Controls */
        #promptOutput {
            background-color: #f7f7f7;
            border: 1px solid #c0c0c0;
            min-height: 200px;
            font-family: 'Consolas', 'Menlo', monospace;
            white-space: pre-wrap;
            margin-bottom: 5px;
        }

        .output-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        #charCount {
            font-size: 0.85rem;
            color: #666;
        }

        .output-controls {
            display: flex;
            gap: 10px;
        }

        .button {
            background-color: var(--color-link);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        
        .button.secondary {
            background-color: #6c757d;
        }

        .button:hover {
            background-color: #1964c8;
        }
        
        .button.secondary:hover {
            background-color: #5a6268;
        }

        /* Toast Notification (New Feature) */
        #toastMessage {
            visibility: hidden;
            min-width: 250px;
            background-color: var(--color-success);
            color: #fff;
            text-align: center;
            border-radius: var(--border-radius);
            padding: 16px;
            position: fixed;
            z-index: 1;
            right: 20px;
            bottom: 30px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transition: opacity 0.5s, bottom 0.5s;
        }

        #toastMessage.show {
            visibility: visible;
            opacity: 1;
            bottom: 50px;
        }

        /* Selection Summary (New Change) */
        #selectionSummary {
            padding: 15px;
            margin-bottom: 20px;
            background-color: #e6f3ff;
            border: 1px solid var(--color-link);
            border-radius: var(--border-radius);
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--color-primary);
        }
        
        /* Preset Controls */
        .preset-controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .preset-controls select {
            flex-grow: 1;
            width: auto;
        }

        /* Footer */
        .footer-section {
            margin-top: 40px;
            padding: 20px;
            background-color: var(--color-accent);
            border-radius: var(--border-radius);
            border-top: 1px solid #e0e0e0;
        }
        
        .footer-section h3 {
            border-left: none;
            padding-left: 0;
            color: var(--color-primary);
            font-size: 1.1rem;
            margin-top: 10px;
        }
        
        .disclaimer p, .attribution p {
            font-size: 0.85rem;
            color: #555;
        }

        /* Responsive Design */
        @media (max-width: 900px) {
            .layout-grid {
                grid-template-columns: 1fr;
            }
            .guide-section {
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
                padding-right: 0;
                padding-bottom: 20px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>The Consultant's AI Prompting Toolkit: A Dynamic Guide</h1>
        
        <!-- Preset Controls (New Feature 1) -->
        <h2>Prompt Preset Library</h2>
        <div class="preset-controls">
            <select id="presetSelector" onchange="loadPreset(this.value)">
                <option value="">-- Load a Saved Prompt Preset --</option>
            </select>
            <button class="button secondary" onclick="savePreset()">Save Current</button>
            <button class="button secondary" onclick="deletePreset()">Delete Selected</button>
        </div>
        
        <div class="layout-grid">
            
            <!-- Educational Guide Section -->
            <div class="guide-section">
                <h2>The P-O-C-E Framework</h2>
                <p>Define the **Persona (P)**, state the **Objective (O)**, apply **Context (C)**, and provide **Input/Example (E)**.</p>

                <h3>P: Persona/Role</h3>
                <h3>O: Objective/Task</h3>
                <h3>C: Context/Constraints</h3>
                <h3>E: Example/Input</h3>
            </div>

            <!-- Interactive Prompt Generator -->
            <div class="generator-section">
                <h2>Interactive Prompt Generator Controls</h2>
                <button class="button secondary" style="margin-bottom: 20px;" onclick="resetGenerator()">Reset All Selections (New Change 2)</button>

                <div class="form-group">
                    <h3>1. Persona/Role (P)</h3>
                    <label><input type="radio" name="persona" value="Act as a highly experienced Chartered Accountant with deep regulatory knowledge." onchange="generatePrompt()"> <span>Chartered Accountant</span></label>
                    <label><input type="radio" name="persona" value="Act as a creative Marketing Strategist specializing in B2B services." onchange="generatePrompt()"> <span>Marketing Strategist</span></label>
                    <label><input type="radio" name="persona" value="Act as an expert Financial Analyst with a focus on risk assessment." onchange="generatePrompt()"> <span>Financial Analyst</span></label>
                    <label><input type="radio" name="persona" value="Act as an expert educator, capable of explaining complex topics simply." onchange="generatePrompt()"> <span>Expert Educator</span></label>
                </div>

                <div class="form-group">
                    <h3>2. Core Objective (O)</h3>
                    <select id="objective" onchange="generatePrompt()">
                        <option value="">-- Select a primary action --</option>
                        <option value="Draft a detailed, professional response covering the main points.">Draft a detailed response</option>
                        <option value="Summarize the key findings from the input, focusing on implications.">Summarize key findings</option>
                        <option value="Brainstorm 10 actionable ideas for a new initiative.">Brainstorm 10 ideas</option>
                        <option value="Format the data provided into a concise, three-column markdown table.">Format data into a table</option>
                    </select>
                </div>
                
                <!-- Advanced Tone/Style Selector (New Feature 5) -->
                <div class="form-group">
                    <h3>3. Advanced Tone/Style (O/C)</h3>
                    <fieldset>
                        <legend>Select Output Style/Format</legend>
                        <label><input type="radio" name="tone" value="Ensure the response is presented in an Advisory/Consultative tone." onchange="generatePrompt()"> <span>Advisory Tone</span></label>
                        <label><input type="radio" name="tone" value="Use technical jargon and detailed terms suitable for experts." onchange="generatePrompt()"> <span>Technical/Jargon Heavy</span></label>
                        <label><input type="radio" name="tone" value="Present the result as an Executive Summary, highlighting only 3 key takeaways." onchange="generatePrompt()"> <span>Executive Summary Style</span></label>
                        <label><input type="radio" name="tone" value="Format the entire response as a structured Q&A session." onchange="generatePrompt()"> <span>Q&A Format</span></label>
                    </fieldset>
                </div>


                <!-- Context & Constraints Grouping (New Change 3) -->
                <div class="form-group">
                    <h3>4. Context & Constraints (C)</h3>
                    
                    <fieldset>
                        <legend>A. Legal & Compliance</legend>
                        <label><input type="checkbox" name="constraint" value="Strictly adhere to (Indian) Tax Law and recent amendments." data-group="legal" onchange="generatePrompt()"> <span>Strictly adhere to (Indian) Tax Law</span></label>
                        <label><input type="checkbox" name="constraint" value="Reference the relevant section numbers for all statutory citations." data-group="legal" onchange="generatePrompt()"> <span>Cite Statute Sections</span></label>
                    </fieldset>

                    <fieldset>
                        <legend>B. Formatting & Length</legend>
                        <label><input type="checkbox" name="constraint" value="Limit the entire response to a maximum of 300 words." data-group="formatting" onchange="generatePrompt()"> <span>Limit response to 300 words</span></label>
                        <label><input type="checkbox" name="constraint" value="The final output must be 5 clear bullet points." data-group="formatting" onchange="generatePrompt()"> <span>5 Clear Bullet Points</span></label>
                    </fieldset>

                </div>

                <div class="form-group">
                    <h3>5. External URL (E) (New Feature 4)</h3>
                    <input type="text" id="externalUrl" placeholder="Paste single URL (e.g., news article, notification) for AI to analyze." onkeyup="generatePrompt()">
                </div>
                
                <div class="form-group">
                    <h3>6. Optional Input/Data (E)</h3>
                    <textarea id="inputData" placeholder="Paste relevant data, brief, or example text here (e.g., a client email, a regulation text, a data list)." onkeyup="generatePrompt()"></textarea>
                </div>

            </div>
        </div>
        
        <!-- Output Area -->
        <hr style="margin-top: 30px;">
        <h2>Generated Draft Prompt</h2>
        
        <!-- Selection Summary (New Change 4) -->
        <div id="selectionSummary">Please make selections above to see a quick summary.</div>

        <textarea id="promptOutput" readonly placeholder="Your custom prompt will appear here as you make selections."></textarea>
        
        <div class="output-footer">
            <!-- Character Counter (New Feature 2) -->
            <div id="charCount">0 characters</div>
            <div class="output-controls">
                <button class="button" onclick="copyPrompt()">Copy Prompt</button>
                <!-- Download Button (New Feature 3) -->
                <button class="button secondary" onclick="downloadPrompt()">Download (.txt)</button>
            </div>
        </div>
        
        <!-- Toast Notification Container (New Change 1) -->
        <div id="toastMessage"></div>

        <!-- Disclaimer and Attribution Section -->
        <div class="footer-section">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>This tool is provided for **informational and educational purposes only**. It is designed to offer a general estimation or guidance based on the inputs provided.</p>
                <p>It does not constitute, and should not be relied upon as, **professional accounting, legal, tax, financial, or other advisory services**. The results are not a substitute for professional consultation with a qualified chartered accountant who can review your specific facts and circumstances.</p>
                <p>No responsibility is accepted for any loss or damage arising from the use or reliance on the information provided by this tool. By using this tool, you acknowledge and agree to these terms.</p>
            </div>
            <hr style="border: 0; border-top: 1px solid #e0e0e0; margin: 15px 0;">
            <div class="attribution">
                <h3>Attribution and Connection</h3>
                <p>Tool Created By:<br>
                <strong>Tanmay Rajendra Bhavar, Chartered Accountant and Founder of TRB & Co.</strong></p>
                <p>Let's Connect:<br>
                For personalized professional advice regarding your business, tax planning, or consultancy needs, please connect with me directly on LinkedIn. We look forward to partnering with you.</p>
            </div>
        </div>

    </div>

    <script>
        /*
        * Embedded JavaScript for Dynamic Prompt Generation and Utility Features
        */
        const outputElement = document.getElementById('promptOutput');
        const inputDataElement = document.getElementById('inputData');
        const objectiveSelect = document.getElementById('objective');
        const presetSelector = document.getElementById('presetSelector');

        // --- Core Prompt Generation Logic ---
        function generatePrompt() {
            let promptParts = [];
            let summaryParts = [];
            let inputPlaceholderText = "Paste relevant data, brief, or example text here...";
            
            // 1. Persona (P)
            const personaRadio = document.querySelector('input[name="persona"]:checked');
            if (personaRadio) {
                promptParts.push(personaRadio.value);
                summaryParts.push(`P: ${personaRadio.nextElementSibling.textContent}`);
            }

            // 2. Objective (O)
            if (objectiveSelect.value) {
                const objectiveText = objectiveSelect.options[objectiveSelect.selectedIndex].text;
                promptParts.push("Your core task is to: " + objectiveSelect.value);
                summaryParts.push(`O: ${objectiveText}`);
                
                // New Change 5: Context-Sensitive Placeholder
                if (objectiveText.includes("data") || objectiveText.includes("table")) {
                    inputPlaceholderText = "Since your objective is formatting data, paste raw, comma-separated data or a structured list of items here.";
                } else if (objectiveText.includes("Summarize")) {
                    inputPlaceholderText = "Paste the document or long text you need the AI to summarize.";
                }
            }
            inputDataElement.placeholder = inputPlaceholderText;

            // 3. Advanced Tone/Style (C) (New Feature 5)
            const toneRadio = document.querySelector('input[name="tone"]:checked');
            if (toneRadio) {
                promptParts.push(toneRadio.value);
                summaryParts.push(`Style: ${toneRadio.nextElementSibling.textContent}`);
            }

            // 4. Context & Constraints (C)
            const constraints = document.querySelectorAll('input[name="constraint"]:checked');
            if (constraints.length > 0) {
                let constraintList = "Constraints and style rules:\n";
                constraints.forEach(checkbox => {
                    constraintList += `- ${checkbox.value}\n`;
                });
                promptParts.push(constraintList.trim());
                summaryParts.push(`C: ${constraints.length} Rule(s)`);
            }
            
            // 5. External URL (E) (New Feature 4)
            const externalUrl = document.getElementById('externalUrl').value.trim();
            if (externalUrl.length > 0) {
                promptParts.push(`\n[EXTERNAL INPUT]\nAnalyze the content found at this URL: ${externalUrl}`);
                summaryParts.push(`URL: Included`);
            }

            // 6. Input Data (E)
            const inputData = inputDataElement.value.trim();
            if (inputData.length > 0) {
                // Use a standard delimiter to cleanly separate the instructions from the data
                promptParts.push("The following is the specific input, brief, or data you must operate on. Do not start the task until you have processed this:\n---\n" + inputData + "\n---");
                summaryParts.push(`E: Data Included`);
            }
            
            // Assemble the final prompt, separated by double newlines for clarity
            const finalPrompt = promptParts.join("\n\n");

            // Update Output
            outputElement.value = finalPrompt || "Your custom prompt will appear here as you make selections.";
            
            // New Feature 2: Character Counter
            document.getElementById('charCount').textContent = `${outputElement.value.length} characters`;

            // New Change 4: Real-Time Selection Summary
            const summaryText = summaryParts.length > 0 ? summaryParts.join(" | ") : "Please make selections above to see a quick summary.";
            document.getElementById('selectionSummary').textContent = summaryText;
        }

        // --- Utility Functions ---

        // New Change 1: Custom Toast Notification
        function showToast(message) {
            const toast = document.getElementById('toastMessage');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(function(){ 
                toast.classList.remove('show'); 
            }, 3000);
        }

        // Copy Prompt
        function copyPrompt() {
            if (outputElement.value && outputElement.value !== "Your custom prompt will appear here as you make selections.") {
                outputElement.select();
                outputElement.setSelectionRange(0, 99999); 
                
                try {
                    document.execCommand('copy');
                    showToast("Prompt Copied to Clipboard!");
                } catch (err) {
                    // Fallback alert if execCommand fails
                    showToast("Could not copy prompt.");
                }

            } else {
                showToast("Please generate a prompt before copying.");
            }
        }
        
        // New Change 2: Reset All Button
        function resetGenerator() {
            // Reset radio buttons
            document.querySelectorAll('input[type="radio"]:checked').forEach(radio => radio.checked = false);
            // Reset checkboxes
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => checkbox.checked = false);
            // Reset select dropdown
            objectiveSelect.value = "";
            // Reset text areas/inputs
            inputDataElement.value = "";
            document.getElementById('externalUrl').value = "";
            
            showToast("Generator settings cleared.");
            generatePrompt(); // Regenerate empty prompt
        }
        
        // New Feature 3: Download Prompt
        function downloadPrompt() {
            const promptContent = outputElement.value;
            if (!promptContent || promptContent === "Your custom prompt will appear here as you make selections.") {
                showToast("Nothing to download yet!");
                return;
            }

            const filename = 'consultant_prompt_' + new Date().toISOString().slice(0, 10) + '.txt';
            const blob = new Blob([promptContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast(`Downloaded: ${filename}`);
        }

        // --- Preset Library Functions (New Feature 1) ---
        
        // Load presets from localStorage
        function getPresets() {
            try {
                const presetsJson = localStorage.getItem('trb_prompt_presets');
                return presetsJson ? JSON.parse(presetsJson) : {};
            } catch (e) {
                console.error("Could not load presets from localStorage:", e);
                return {};
            }
        }

        // Save presets to localStorage
        function savePresets(presets) {
            try {
                localStorage.setItem('trb_prompt_presets', JSON.stringify(presets));
            } catch (e) {
                console.error("Could not save presets to localStorage:", e);
            }
        }

        // Render the preset selector dropdown
        function renderPresetSelector() {
            const presets = getPresets();
            presetSelector.innerHTML = '<option value="">-- Load a Saved Prompt Preset --</option>';

            for (const key in presets) {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = key;
                presetSelector.appendChild(option);
            }
        }
        
        // Save the current prompt configuration
        function savePreset() {
            const presetName = prompt("Enter a name for this prompt preset (e.g., 'Tax Summary Request'):");
            if (!presetName) return;

            const presets = getPresets();
            const config = {
                persona: document.querySelector('input[name="persona"]:checked')?.value || '',
                objective: objectiveSelect.value || '',
                tone: document.querySelector('input[name="tone"]:checked')?.value || '',
                constraints: Array.from(document.querySelectorAll('input[name="constraint"]:checked')).map(cb => cb.value),
                externalUrl: document.getElementById('externalUrl').value,
                inputData: inputDataElement.value,
            };

            presets[presetName] = config;
            savePresets(presets);
            renderPresetSelector();
            showToast(`Preset "${presetName}" saved!`);
        }
        
        // Load a selected preset
        function loadPreset(name) {
            if (!name) return;

            const presets = getPresets();
            const config = presets[name];

            if (config) {
                // Clear all current selections first
                resetGenerator(); 
                
                // Apply configuration for Persona
                const personaInput = document.querySelector(`input[name="persona"][value="${config.persona}"]`);
                if (personaInput) {
                    personaInput.checked = true;
                }
                
                // Apply configuration for Objective
                objectiveSelect.value = config.objective;
                
                // Apply configuration for Tone
                const toneInput = document.querySelector(`input[name="tone"][value="${config.tone}"]`);
                if (toneInput) {
                    toneInput.checked = true;
                }

                // Apply constraints
                config.constraints.forEach(value => {
                    const cb = document.querySelector(`input[name="constraint"][value="${value}"]`);
                    if (cb) cb.checked = true;
                });

                document.getElementById('externalUrl').value = config.externalUrl;
                inputDataElement.value = config.inputData;

                generatePrompt();
                showToast(`Preset "${name}" loaded successfully.`);
            }
        }
        
        // Delete the currently selected preset
        function deletePreset() {
            const name = presetSelector.value;
            if (!name) {
                showToast("Please select a preset to delete.");
                return;
            }

            if (confirm(`Are you sure you want to delete the preset "${name}"?`)) {
                const presets = getPresets();
                delete presets[name];
                savePresets(presets);
                renderPresetSelector();
                resetGenerator();
                showToast(`Preset "${name}" deleted.`);
            }
        }


        // Initialization on Load
        window.onload = function() {
            renderPresetSelector(); // Load and display saved presets
            generatePrompt(); // Generate initial empty prompt
        }; 
    </script>
</body>
</html>
